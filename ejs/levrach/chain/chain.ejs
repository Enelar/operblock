<%
if (typeof this.chain != 'object')
  return "";
var task = this.chain.pop();
if (this.chain.length != 0)
{
%>
  <%= this.DeferRender(task, {design: 'levrach/chain/chain.ejs', data: this, up: ShortcutContext}) %>
<%
}
else
{ // Exit condition
%>
  <%= this.DeferRender(task, this.data, ShortcutChildContext) %>
<%
}
%>

<%
function ShortcutChildContext()
{
  ShortcutContext(this);
}
function ShortcutContext(context)
{
  context.escape = __context.escape;
  __context.escape().across = context;
}
%>